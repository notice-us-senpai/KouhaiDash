<%= form_for([@group,@category,@task]) do |f| %>
  <% if @task.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@task.errors.count, "error") %> prohibited this task from being saved:</h2>

      <ul>
      <% @task.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :deadline %><br>
    <%= f.date_select :deadline %>
  </div>
  <div class="field">
    <%= f.label :description %><br>
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.label :done %><br>
    <%= f.check_box :done %>
  </div>
  <div id="assignment" class="field">
    <label for="task_assignments">Assigned to:</label>
    <ul id="assign_list">
      <%=f.fields_for :task_assignments do |assign_form| %>
      <li>
        <label for="membership_id">User:</label>
        <%= assign_form.select :membership_id, options_for_select(@memberships_array, assign_form.object.membership_id)%>
        <%= assign_form.hidden_field :_destroy%>
        <button type="button" class="assignremovebtn" data-preexisting="true" data-id="<%= assign_form.index %>">Remove</button>
      </li>
      <div style='display: none' id='assign_select_template'>
          <%=options_for_select(@memberships_array)%>
      </div>
      <%end%>
    </ul>
    <button type="button" class="assignaddbtn">Add Assignment</button>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
